{"version":3,"file":"sls.cjs.js","sources":["../src/config/bff.config.ts","../src/environment.ts","../src/server/helper.ts","../src/server/runtime/template.ts","../src/server/runtime/prod.ts","../src/constants/error.ts","../src/constants/proxy.ts","../src/server/proxy.ts","../src/server/index.ts","../src/sls.ts"],"sourcesContent":["/**\n * @file BFF server config\n * @module config.bff\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const BFF_TUNNEL_PREFIX = '/_tunnel'\nexport const BFF_PROXY_PREFIX = '/_proxy'\nexport const BFF_PROXY_ALLOWLIST = ['https://surmon.me', 'https://cdn.surmon.me']\n\nexport const getBFFServerPort = () => Number(process.env.PORT || 3000)\n","/**\n * @file Dev environment\n * @module environment\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport enum NodeEnv {\n  Development = 'development',\n  Production = 'production',\n  Test = 'test'\n}\n\nexport const NODE_ENV = process.env.NODE_ENV as NodeEnv\nexport const isDev = process.env.NODE_ENV === NodeEnv.Development\nexport const isProd = process.env.NODE_ENV === NodeEnv.Production\nexport const isTest = process.env.NODE_ENV === NodeEnv.Test\n","/**\n * @file BFF Server helper\n * @module server.helper\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport fs from 'fs'\nimport path from 'path'\nimport { isDev } from '@/environment'\n\n// MARK: 与非生产资料解耦\nexport const NODEPRESS_API = `https://api.surmon.me`\n\nexport const ROOT_PATH = process.cwd()\nexport const DIST_PATH = path.join(ROOT_PATH, 'dist')\nexport const PRDO_CLIENT_PATH = path.join(DIST_PATH, 'client')\nexport const PRDO_SERVER_PATH = path.join(DIST_PATH, 'server')\n\nexport const PUBLIC_PATH = isDev ? path.join(ROOT_PATH, 'public') : PRDO_CLIENT_PATH\n","import type { MetaResult } from '@/services/meta'\n\nexport const resolveTemplate = (config: {\n  template: string\n  appHTML: string\n  metas: MetaResult\n  scripts?: string\n  manifest?: any\n}) => {\n  const { template, appHTML, metas, scripts, manifest } = config\n\n  const bodyScripts = [\n    scripts\n    // MARK: https://cn.vitejs.dev/config/#build-ssrmanifest\n    // client output less assets (3 js + 1 css) & built-in HTML\n    // manifest\n  ].join('\\n')\n\n  const html = template\n    // MARK: replace! $ sign & use function replacer\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#specifying_a_string_as_a_parameter\n    .replace(/<title>[\\s\\S]*<\\/title>/, '')\n    .replace(`<html`, () => `<html ${metas.htmlAttrs} `)\n    .replace(`<head>`, () => `<head>\\n${metas.headTags}`)\n    .replace(`<!--app-html-->`, () => appHTML)\n    .replace(`<body>`, () => `<body ${metas.bodyAttrs}>`)\n    .replace(`</body>`, () => `\\n${bodyScripts}\\n</body>`)\n\n  return html\n}\n","import fs from 'fs'\nimport path from 'path'\nimport { Express } from 'express'\nimport { DIST_PATH, PRDO_SERVER_PATH } from '../helper'\nimport { resolveTemplate } from './template'\nimport type { RenderResult } from '@/ssr'\n\nexport const enableProdRuntime = async (app: Express) => {\n  const template = fs.readFileSync(path.resolve(DIST_PATH, 'template.html'), 'utf-8')\n  const { renderApp, renderError } = require(path.resolve(PRDO_SERVER_PATH, 'ssr.js'))\n\n  app.use('*', async (request, response) => {\n    try {\n      const redered: RenderResult = await renderApp(request)\n      response\n        .status(redered.code)\n        .set({ 'Content-Type': 'text/html' })\n        .end(\n          resolveTemplate({\n            template,\n            appHTML: redered.html,\n            metas: redered.metas,\n            scripts: redered.scripts\n          })\n        )\n    } catch (error: any) {\n      const redered: RenderResult = await renderError(request, error)\n      response.status(redered.code).end(\n        resolveTemplate({\n          template,\n          appHTML: redered.html,\n          metas: redered.metas,\n          scripts: redered.scripts\n        })\n      )\n    }\n  })\n}\n","/**\n * @file Error constant\n * @module constant.error\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const BAD_REQUEST = 400\nexport const FORBIDDEN = 403\nexport const NOT_FOUND = 404\nexport const INVALID_ERROR = 500\n","/**\n * @file Proxy constant\n * @module constant.proxy\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport enum ProxyModule {\n  Default = 'default',\n  BiliBili = 'bilibili',\n  Instagram = 'instagram',\n  NetEasyMusic = '163',\n  Disqus = 'disqus'\n}\n","/**\n * @file BFF Server proxy\n * @module server.proxy\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { RequestHandler } from 'express'\nimport { createProxyServer } from 'http-proxy'\nimport { FORBIDDEN, BAD_REQUEST } from '@/constants/error'\nimport { ProxyModule } from '@/constants/proxy'\nimport { BFF_PROXY_PREFIX, BFF_PROXY_ALLOWLIST } from '@/config/bff.config'\nimport { isProd } from '@/environment'\n\ninterface ProxyConfigItem {\n  module: ProxyModule\n  origin?: string\n  referer?: string\n}\n\nconst proxys: ProxyConfigItem[] = [\n  {\n    module: ProxyModule.Default,\n    origin: 'https://surmon.me',\n    referer: 'https://surmon.me/'\n  },\n  {\n    module: ProxyModule.BiliBili,\n    origin: 'https://www.bilibili.com',\n    referer: 'https://www.bilibili.com/'\n  },\n  {\n    module: ProxyModule.Instagram,\n    origin: 'https://www.instagram.com',\n    referer: 'https://www.instagram.com/'\n  },\n  {\n    module: ProxyModule.NetEasyMusic,\n    origin: 'https://music.163.com',\n    referer: 'https://music.163.com/'\n  },\n  {\n    module: ProxyModule.Disqus,\n    referer: 'https://surmon.disqus.com/'\n  }\n]\n\nexport const PROXY_ROUTE_PATH = `${BFF_PROXY_PREFIX}/:module/*`\n\nexport const proxyer = (): RequestHandler => {\n  // https://github.com/http-party/node-http-proxy\n  const proxyMap = new Map(proxys.map(({ module, ...rest }) => [module, rest]))\n  const proxy = createProxyServer({\n    prependPath: true,\n    ignorePath: true,\n    toProxy: false,\n    xfwd: true\n  })\n\n  // https://github.com/http-party/node-http-proxy/issues/813\n  proxy.on('error', (error: any, _, response: any, target: any) => {\n    console.warn(`[BFF] proxy error: ${error.message} > ${target?.href}`)\n    if (!response.headersSent) {\n      response.writeHead(500, { 'content-type': 'application/json' })\n    }\n    response.end(JSON.stringify({ error: 'proxy_error', reason: error.message }))\n  })\n\n  proxy.on('proxyReq', (proxyRequest) => {\n    proxyRequest.setHeader(\n      'User-Agent',\n      'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3223.8 Safari/'\n    )\n  })\n\n  proxy.on('proxyRes', (proxyResponse, request: any) => {\n    const statusCode = proxyResponse.statusCode as number\n    const location = proxyResponse.headers.location\n    if ([301, 302, 307, 308].includes(statusCode) && location) {\n      proxyResponse.headers.location = `${BFF_PROXY_PREFIX}/${\n        request.params.module\n      }/${encodeURIComponent(location)}`\n    }\n    // proxy cache\n    if (statusCode === 200) {\n      proxyResponse.headers['cache-control'] = `max-age=315360000`\n    }\n  })\n\n  return (request, response) => {\n    if (isProd) {\n      const referer = (request.headers.referrer as string) || request.headers.referer\n      const origin = request.headers.origin\n      const isAllowedReferer = !referer || BFF_PROXY_ALLOWLIST.some((i) => referer.startsWith(i))\n      const isAllowedOrigin = !origin || BFF_PROXY_ALLOWLIST.some((i) => origin.startsWith(i))\n      if (!isAllowedReferer || !isAllowedOrigin) {\n        response.status(FORBIDDEN).send()\n        return\n      }\n    }\n\n    const config = proxyMap.get(request.params.module as ProxyModule)\n    const targetURL = decodeURIComponent(request.params['0'])\n    let parsedURL: URL | null = null\n    try {\n      parsedURL = new URL(targetURL)\n    } catch (error) {\n      response.status(BAD_REQUEST).send()\n      return\n    }\n\n    const headers: any = {}\n    if (config?.origin) {\n      headers['Origin'] = config.origin\n    }\n    if (config?.referer) {\n      headers['Referer'] = config.referer\n    }\n\n    proxy.web(request, response, {\n      target: targetURL,\n      changeOrigin: true,\n      followRedirects: false,\n      autoRewrite: false,\n      headers: {\n        host: parsedURL.hostname,\n        ...headers\n      }\n    })\n  }\n}\n","/**\n * @file BFF Server main\n * @module server.index\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport http from 'http'\nimport express from 'express'\nimport compression from 'compression'\nimport cookieParser from 'cookie-parser'\nimport { PROXY_ROUTE_PATH, proxyer } from './proxy'\n\nexport const createExpressApp = () => {\n  // init app\n  const app = express()\n  const server = http.createServer(app)\n\n  // proxy\n  app.use(PROXY_ROUTE_PATH, proxyer())\n\n  // middlewares\n  app.use(express.json())\n  app.use(cookieParser())\n  app.use(compression())\n\n  return {\n    app,\n    server\n  }\n}\n","/**\n * @file Serverless server entry\n * @module Serverless\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { getBFFServerPort } from '@/config/bff.config'\nimport { enableProdRuntime } from './server/runtime/prod'\nimport { createExpressApp } from './server'\n\nconst { app, server } = createExpressApp()\n\n// TODO\nenableProdRuntime(app)\nserver.listen(getBFFServerPort())\n\n// MARK\nexport const initializer = (context, callback) => {\n  console.log('serverless initializing')\n  callback(null, '')\n}\n\n// MARK\nexport const handler = (request, response, context) => {\n  console.log('hello world')\n  response.send('hello world')\n}\n"],"names":["path","fs","createProxyServer","express","http","cookieParser","compression"],"mappings":"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"}